/*! ias 2013-02-26 */
var g2g_info={version:"v0.1"},g2g=function(t){"use strict";return t.GraphComponent=function(t,e,o,n,r){this.x=e,this.y=o,this.color=n,this.parent=t,this.g=t.append("g").attr("transform","translate("+e+","+o+")"),r&&this.g.attr("class",r)},t.GraphComponent.prototype.getXY=function(){return{x:this.x,y:this.y}},t.GraphComponent.prototype.setVisible=function(t){return this.g.style("display",t?"inline":"none"),this},t.GraphComponent.prototype.getNode=function(){return this.g},t.GraphComponent.prototype.draw=function(){return this},t.GraphComponent.prototype.select=function(){return this},t.GraphComponent.prototype.moveOnTop=function(){return this.parent.appendChild(this),this},t.Link=function(e,o,n,r){t.GraphComponent.call(this,e,0,0,n,r),this.elements=[],this.closed=!1;var i=d3.svg.area().x(function(t){return t.x}).y(function(t){return t.y}).interpolate(o),s=[];this.path=function(){return i(s)},this.addElement=function(t){var e=t.getXY();return this.elements.push(t),s.push(e),s.sort(function(t,e){return t.y-e.y}),this},this.close=function(){return this.closed?void 0:(s.push(this.elements[0].getXY()),this.closed=!0,this)}},t.Link.prototype=Object.create(t.GraphComponent.prototype),t.Link.prototype.select=function(t){return this.setVisible(t),this.elements.forEach(function(e){e.select(t)}),this},t.Link.prototype.draw=function(){return this.g.append("path").attr("d",this.path()).style("stroke",this.color),this},t.Options=function(t){if(this.listeners={},t){var e;for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},t.Options.prototype.addListener=function(t,e){var o=Array.isArray(t)?t:[t],n=this;o.forEach(function(t){n.listeners.hasOwnProperty(t)===!1&&(n.listeners[t]=[]),e&&"function"==typeof e&&n.listeners[t].push(e)})},t.Options.prototype.getValue=function(t){return this.hasOwnProperty(t)?this[t]:void 0},t.Options.prototype.change=function(t,e){var o,n,r,i,s=t;if(t.indexOf(".")>0?(o=t.split("."),s=o[0],n=this[s][o[1]]):n=this[s],this.hasOwnProperty(s)&&n!==e&&(o?this[s][o[1]]=e:this[s]=e,this.listeners.hasOwnProperty(s)))for(i=this.listeners[s],r=0;i.length>r;r+=1)i[r].call(this,s)},t}(g2g_info),ias_info={version:"v0.6",mode:"offline",modules:[],config:{}},ias=function(t){"use strict";function e(e,o,n,r,i,s,a){e&&t.log(e),t.config=o,t.version=o.version,t.modules.forEach(function(t){t.init({world:n,centroids:r,networks:i,cohorts:s,hivrates:a})}),t.modules.forEach(function(t){t.hasOwnProperty("run")&&t.run()})}return t.log=function(){console&&console.log&&console.log.apply(console,arguments)},t.load=function(){queue().defer(d3.json,"/ias-config.json").defer(d3.json,"/data/world-countries.json").defer(d3.json,"/data/centroids.json").defer(d3.json,"/data/ias-networks.json").defer(d3.json,"/data/ias-cohorts.json").defer(d3.csv,"/data/hiv-prevalence-rate.csv").await(e)},t}(ias_info);ias.util=function(){"use strict";var t,e={},o=d3.scale.linear().domain([0,23]),n={};return e.getNetworkColor=function(t){return n.hasOwnProperty(t)?n[t]:(ias.log("network color for"+t+" not found"),"white")},e.getCountryColor=function(t){var o=ias.model.getCountryById(t),n=o.hivPrevalenceRate;return void 0!==n?e.getBackgroundColor(n):"gray"},e.getBackgroundColor=function(t){return o(t)},e.getBackgroundColorSteps=function(){return ias.config.map.background.steps},e.getCountryColorByFeature=function(t){var o=ias.model.getCountry(t.properties.name),n=o.hivPrevalenceRate;return void 0!==n?e.getBackgroundColor(n):"gray"},e.getCountryId=function(t){var e=t.id;return"-99"===e?"9"+t.properties.name.substring(0,2):t.id},e.getCohortHtml=function(t){var e,o,n,r="<span class='tooltip title'>Cohort</span><h1 class='tooltip'>"+t.name+":</h1>",i="white";r+="<div id='ctooltippin'></div>&nbsp;"+t.size+" subjects ",r+="&nbsp;<span style='background:"+ias.util.getNetworkColor(t.getNetwork()),r+=";'>&nbsp;&nbsp;&nbsp;</span>&nbsp"+t.getNetwork(),r+="<br><br><b>Status:</b>&nbsp;"+t.status+"<br>",r+="<br><b>Objectives:</b><br>",r+="<span class='tooltip objectives'>"+t.objectives+"</span>",r+="<br><br><b>Countries:</b><br><table>";for(n in t.countryData)t.countryData.hasOwnProperty(n)&&(e=ias.model.allcountriesById[n],o=e.hivPrevalenceRate,i=ias.util.getBackgroundColor(o),r+="<tr><td class='firstcol'><span style='background:",r+=i+";'>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;",r+=e.name,r+="</td></tr>");return r+="</table>",r+="<br><br><a class='tooltip' target='_blank' href='"+ias.config.map.cohort.fullProfile.replace("$code$",t.code)+"'>View Full Profile</a>"},e.getCountryHtml=function(t){var e="<span class='tooltip title'>Country   "+t.id+"</span><h1 class='tooltip'>"+t.name+"</h1><table>",o="white";return e+="<tr><td class='firstcol'>HIV Prevalence Rate</td><td class='secondcol'>",e+=(t.hivPrevalenceRate||"na")+" %</td></tr>",e+="<tr><td>ARV Coverage Rate</td><td class='secondcol'>",e+=(t.arvCoverageRate||"na")+" %</td></tr>",t.cohorts&&t.cohorts.length>0&&(e+="<tr><td colspane='2'><br><b>COHORTS:</b></td></tr>",t.cohorts.forEach(function(t){o=ias.util.getNetworkColor(t.networks[0]),e+="<tr><td class='firstcol'><span style='background:",e+=o+";'>&nbsp;&nbsp;&nbsp;</span>&nbsp;",e+=t.name+"</td><td class='secondcol'>",e+=t.size+"</td></tr>"})),e+="</table>"},e.init=function(e){var r,i=[];t=ias.config.network.colorSchemes,e.networks.children.forEach(function(e,o){r=d3.scale.ordinal().range(colorbrewer[t[o]][6]),e.children.forEach(function(t){n[t.code]=r(t.code)})}),e.hivrates.forEach(function(t){i.push(t.rate)}),o.domain(i),o.range(colorbrewer[ias.config.map.background.scheme][ias.config.map.background.steps.length])},ias.modules.push(e),e}(),ias.filter=function(){"use strict";function t(t,e){var o=d3.select("#"+t).selectAll("input").data(e).enter().append("div");o.append("input").attr("checked",!0).attr("type","checkbox").attr("id",function(e){return t+e}).attr("value",function(t){return t}).attr("selected","selected"),o.append("label").attr("for",function(e){return t+e}).attr("class",t).text(function(t){return t})}var e,o,n={},r={},i=[],s={};for(e=1980;2013>=e;e+=1)i.push(e);return n.BACKGROUND_INFO="backgroundInfo",n.YEAR="year",n.NETWORKS="networks",n.ENROLLMENT_STATUS="enrollmentStatus",n.AGE_GROUP="ageGroup",s[n.BACKGROUND_INFO]="HIV",s[n.YEAR]="1980",s[n.NETWORKS]={},s[n.ENROLLMENT_STATUS]="All",s[n.AGE_GROUP]="All",o=new g2g.Options(s),n.getValue=function(t){return o.getValue(t)},n.addListener=function(t,e){o.addListener(t,e)},d3.select("#backgroundInfo").on("change",function(){var t=this.options[this.selectedIndex].value;o.change(n.BACKGROUND_INFO,t)}),d3.select("#year").on("change",function(){var t=parseInt(this.options[this.selectedIndex].value,10);o.change(n.YEAR,t)}).selectAll("option").data(i).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),n.init=function(e){function i(t,e){var o=t.code;return"EuroCoord"===o||"IeDEA"===o||"Other"===o?"network":"network "+e}function s(t){return"EuroCoord"===t||"IeDEA"===t||"Other"===t?"rgb(255,255,255)":ias.util.getNetworkColor(t)}function a(t,e){var r=e.code;"EuroCoord"===r||"IeDEA"===r||"Other"===r?d3.selectAll("input.network."+r).each(function(e){d3.select(this).property("checked",t.checked),o.change(n.NETWORKS+"."+e.code,t.checked)}):o.change(n.NETWORKS+"."+r,t.checked)}function c(t){var e=t.replace(/^rgb?\(|\s+|\)$/g,"").split(","),o=.3*e[0]+.59*e[1]+.11*e[2];return o}var l,u;r=ias.config.filter,d3.select("#status").on("change",function(){var t=this.options[this.selectedIndex].value;o.change(n.ENROLLMENT_STATUS,t)}).selectAll("option").data(r.enrollmentStatus).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),t("ageGroup",r.ageGroup),t("subjectStatus",r.subjectStatus),e.networks.children.forEach(function(t){l=t.children,l.forEach(function(t){o.networks[t.code]=!0}),l.unshift({code:t.code,name:t.name}),u=d3.select("#"+t.code).selectAll("div").data(l).enter().append("div").attr("class",function(e){return t.code!==e.code?"subnetwork":"network"}),u.append("input").attr("checked",!0).attr("class",function(e){return i(e,t.code)}).attr("type","checkbox").attr("id",function(t){return"n"+t.code}).on("click",function(t){return a(this,t)}),u.append("label").attr("class",function(e){return t.code===e.code?"network title":"network"}).attr("for",function(t){return"n"+t.code}).style("background",function(t){return c(s(t.code)),s(t.code)}).style("color",function(t){var e=s(t.code),o=c(e);return 130>o?"lightgray":"#666"}).text(function(t){return t.name}),"Other"!==t&&u.append("br")})},ias.modules.push(n),n}(),ias.model=function(){"use strict";var t={worldJson:{},networks:{},allcountries:[],allcountriesByName:{},allcountriesById:{},countriesWithCohorts:[],cohorts:[]};return t.getCountry=function(e){var o=t.allcountriesByName[e];return o},t.getCountryById=function(e){var o=t.allcountriesById[e];return o},t.init=function(e){t.worldJson=e.world,t.networks=e.networks.children,t.worldJson.features.forEach(function(e){var o=new ias.model.Country(e);t.allcountries.push(o),t.allcountriesByName[o.name]=o,t.allcountriesById[o.id]=o}),e.hivrates.forEach(function(e){var o=t.allcountriesByName[e.country];void 0!==o?o.hivPrevalenceRate=parseFloat(e.rate):ias.log("HIV Rates: no country found for "+e.country)}),e.cohorts.cohorts.forEach(function(e){t.cohorts.push(new ias.model.Cohort(e))}),t.allcountries.forEach(function(e){e.numberOfCohorts()>0&&t.countriesWithCohorts.push(e)})},ias.modules.push(t),t}(),ias.model=function(t){"use strict";return t.Country=function(t){this.feature=t,this.networks={},this.cohorts=[],this.hivPrevalenceRate=void 0,this.arvCoverageRate=void 0,this.id=t.id,"-99"===this.id&&(this.id="9"+t.properties.name.substring(0,2)),this.name=this.feature.properties.name},t.Country.prototype.addNetwork=function(t){this.networks.hasOwnProperty(t)===!1&&(this.networks[t]=t)},t.Country.prototype.getNetworks=function(){return Object.keys(this.networks)},t.Country.prototype.numberOfCohorts=function(){return this.cohorts?this.cohorts.length:0},t}(ias.model||{}),ias.model=function(t){"use strict";return t.CountryData={countryId:"",size:0},t}(ias.model||{}),ias.model=function(t){"use strict";return t.Cohort=function(e){this.status=e.status,this.code=e.code,this.name=e.name,this.objectives=e.objectives,this.year=e.year,this.size=e.size,this.networks=e.networks,this.countryData={};var o=this;e.countries.forEach(function(n){var r=t.allcountriesByName[n];r?(o.addCountryData(r.id,10),r.cohorts.push(o),r.addNetwork(e.networks[0])):ias.log("no country found for "+n)})},t.Cohort.prototype.getCountryData=function(t){return this.countryData[t]},t.Cohort.prototype.getCountryIds=function(){return Object.keys(this.countryData)},t.Cohort.prototype.addCountryData=function(t,e){var o=Object.create(ias.model.CountryData);o.countryId=t,o.size=e,this.countryData[t]=o,this.numberOfCountries+=1},t.Cohort.prototype.getNetwork=function(){return this.networks[0]},t}(ias.model||{}),ias.graph=function(){"use strict";var t={components:[],selectedCohort:void 0,tooltip:{country:{},cohort:{}}};return t.projection=d3.geo.equirectangular().scale(140),t.path=d3.geo.path().projection(t.projection),t.enterCountry=function(e){var o=ias.model.allcountriesById[e];t.tooltip.country.html(ias.util.getCountryHtml(o)).show();try{d3.select("#"+e).style("stroke","darkgray").style("stroke-width","1px")}catch(n){}},t.exitCountry=function(e){t.tooltip.country.hide();try{d3.select("#"+e).style("stroke","white").style("stroke-width","0px;")}catch(o){}},t.init=function(e){var o,n,r={};o=d3.select("#map").append("svg").attr("width",ias.config.map.width).attr("height",ias.config.map.height),n=d3.select("#legend").append("svg").attr("width",ias.config.legend.width).attr("height",ias.config.legend.height),t.map=ias.graph.map(o),t.components.push(t.map),t.legend=ias.graph.legend(n),t.components.push(t.legend),e.centroids.forEach(function(t){r[t.id]=t.ll}),t.tooltip.country=ias.graph.tooltip("tooltipCountry",ias.config.map.tooltip.country,"","country"),t.tooltip.cohort=ias.graph.tooltip("tooltipCohort",ias.config.map.tooltip.cohort,"","cohort"),ias.model.countriesWithCohorts.forEach(function(e){var o,n,i,s,a=[],c=r[e.name];a=void 0===c?t.path.centroid(e.feature):t.projection(c),e.centroidx=a[0],e.centroidy=a[1],1===e.cohorts.length?(o=e.cohorts[0].getCountryData(e.id),o.x=a[0],o.y=a[1]):(s=e.cohorts.length,n=d3.scale.linear().domain([0,s]).range([-s/2,s/2]),e.cohorts.forEach(function(t,r){o=t.getCountryData(e.id),i=6*n(r),o.x=a[0]+i,o.y=a[1]}))})},t.run=function(){t.components.forEach(function(t){t.draw()})},ias.modules.push(t),t}(),ias.graph=function(t){"use strict";return t.tooltip=function(t,e,o,n){var r={},i=d3.select("body").append("div").attr("class","tooltip "+(n||"")).attr("id",t).style("left",e[0]+"px").style("top",e[1]+"px").style("opacity",0).html(o);return r.show=function(){return i.transition().duration(100).style("opacity",1),r},r.hide=function(){return i.transition().duration(200).style("opacity",0),r},r.html=function(t){return i.html(t),r},r.style=function(t,e){return i.style(t,e),r},r.move=function(t){return i.style("left",t[0]+"px").style("top",t[1]+"px"),r},r},t}(ias.graph||{}),ias.graph=function(t){"use strict";return t.Pin=function(t,e,o){this.cohort=e,this.country=o,this.countryData=e.getCountryData(o.id),this.maxRadius=15,this.minRadius=2,this.scale=d3.scale.linear().domain([0,3e5]).range([this.minRadius,this.maxRadius]),this.size=this.scale(this.cohort.size),this.gselect=null,this.link=null,this.pin=null,g2g.GraphComponent.call(this,t,this.countryData.x,this.countryData.y,ias.util.getNetworkColor(e.getNetwork()),"pin cohort")},t.Pin.prototype=Object.create(g2g.GraphComponent.prototype),t.Pin.prototype.isSameStatus=function(t){return"All"===t||this.cohort.status===t},t.Pin.prototype.tooltip=function(){ias.graph.tooltip.cohort.html(ias.util.getCohortHtml(this.cohort)).show()},t.Pin.prototype.enter=function(){void 0!==ias.graph.selectedCohort&&ias.graph.selectedCohort!==this&&(ias.graph.selectedCohort.exit(!0),ias.graph.selectedCohort=void 0),(void 0===ias.graph.selectedCohort||ias.graph.selectedCohort!==this)&&(this.link?this.link.select(!0):this.select(!0),ias.graph.enterCountry(this.country.id),this.tooltip()),this.parent.selectAll("g:not([code='"+this.cohort.code+"'])").style("opacity",.4),this.parent.selectAll("g[code='"+this.cohort.code+"']").each(function(){this.parentNode.appendChild(this)}),this.pin.style("opacity",1)},t.Pin.prototype.exit=function(t){(t||void 0===ias.graph.selectedCohort||ias.graph.selectedCohort!==this)&&(this.link?this.link.select(!1):this.select(!1),ias.graph.exitCountry(this.country.id),ias.graph.tooltip.cohort.hide()),this.parent.selectAll("g:not([code='"+this.cohort.code+"'])").style("opacity",1),this.pin.style("opacity",.8)},t.Pin.prototype.filter=function(){var t=ias.filter.getValue(ias.filter.NETWORKS)[this.cohort.getNetwork()];return t=t&&this.isSameStatus(ias.filter.getValue(ias.filter.ENROLLMENT_STATUS)),this.setVisible(t),this},t.Pin.prototype.addLink=function(t){this.link=t},t.Pin.prototype.select=function(t){this.gselect&&this.gselect.style("display",t?"inline":"none"),this.pin.style("opacity",t?1:.8)},t.Pin.prototype.draw=function(){this.g.attr("code",this.cohort.code),this.g.append("line").attr("x1",0).attr("y1",-8).attr("x2",0).attr("y2",0).style("stroke",ias.config.map.cohort.linkcolor).style("stroke-width","0.5px"),this.pin=this.g.append("circle").attr("cx",0).attr("cy",-8-this.size).attr("class","pin").style("fill",this.color).style("opacity",.8).style("stroke",ias.config.map.cohort.linkcolor).style("stroke-width","0.5px").attr("r",this.size);var t=this;return this.g.on("mouseover",function(){t.enter()}),this.g.on("mouseout",function(){t.exit(!1)}),this.g.on("click",function(){ias.graph.selectedCohort!==t&&(ias.graph.selectedCohort=t)}),this},t}(ias.graph||{}),ias.graph=function(t){"use strict";return t.map=function(t){function e(t){var e=-v[0]+ias.config.map.width/2/A,o=-v[1]+ias.config.map.height/2/A;b.transition().duration(t).attr("transform","scale("+A+") translate("+e+","+o+")")}function o(t,o){v[0]+=t[0],v[1]+=t[1],e(o)}function n(o){var n;o&&m!==o?(n=ias.graph.path.centroid(o),v=[n[0],n[1]],A=3,m=o):(m=null,A=1,v=ias.graph.projection([0,0]),v[1]+=w,t.style("cursor","default")),ias.graph.legend.zoom(A),e(1e3)}function r(){n(null)}function i(){m=null,A=3,v=ias.graph.projection([0,0]),v[1]+=w,ias.graph.legend.zoom(A),e(1e3)}function s(){o([0,-10],500)}function a(){o([0,10],500)}function c(){o([10,0],500)}function l(){o([-10,0],500)}function u(){var t;R&&(t=[-(d3.event.x-k[0]),-(d3.event.y-k[1])],k=[d3.event.x,d3.event.y],o(t,0),d3.event.preventDefault(),d3.event.stopPropagation())}function h(){A>1&&(d3.event.preventDefault(),d3.event.stopPropagation(),t.style("cursor","move"),R=!0,k=[d3.event.x,d3.event.y])}function p(){R=!1,t.style("cursor","pointer")}function d(){var e,o={},r={};t.on("mousemove",u).on("mousedown",h).on("mouseup",p),x.selectAll("path").data(ias.model.worldJson.features).enter().append("path").attr("class","country").attr("d",ias.graph.path).style("fill",function(t){return ias.util.getCountryColorByFeature(t)}).attr("id",function(t){return ias.util.getCountryId(t)}).on("mouseover",function(t){ias.graph.enterCountry(ias.util.getCountryId(t))}).on("mouseout",function(t){ias.graph.exitCountry(ias.util.getCountryId(t))}).style("opacity",ias.config.map.background.opacity).on("click",n),x.select("#ATA").remove(),ias.model.countriesWithCohorts.forEach(function(t){var e=t.numberOfCohorts(),n={};e>0&&t.cohorts.forEach(function(e){n=new ias.graph.Pin(E,e,t).draw(),void 0===o[e.code]?o[e.code]=[n]:o[e.code].push(n),N.push(n)})});for(e in o)o.hasOwnProperty(e)&&o[e].length>1&&(r=new g2g.Link(O,ias.config.map.cohort.linkinterpolate,ias.config.map.cohort.linkcolor,"link cohort").setVisible(!1),f(r,o[e]),r.draw())}function f(t,e){e.forEach(function(e){t.addElement(e),e.addLink(t)})}function g(){}function y(){N.forEach(function(t){t.filter()})}var m,v,k,C=-100,w=-20,b=t.append("g").attr("id","mapcontainer").attr("transform","translate("+C+","+w+")"),x=b.append("g").attr("id","map").attr("class","map"),O=(b.append("g").attr("id","pins_country").attr("class","pin country").style("display",ias.filter.viewCountryPins?"inline":"none"),b.append("g").attr("id","links_cohort").attr("class","link cohort")),E=b.append("g").attr("id","pins_cohort").attr("class","pin cohort"),N=[],A=1,R=!1;return ias.filter.addListener([ias.filter.NETWORKS,ias.filter.YEAR,ias.filter.ENROLLMENT_STATUS],y),{draw:d,update:g,filterUpdate:y,zoomout:r,zoomin:i,moveup:s,movedown:a,moveright:c,moveleft:l}},t}(ias.graph||{}),ias.graph=function(t){"use strict";return t.legend=function(t){function e(t,e,o,n){p.append("image").attr("xlink:href","images/"+t+".png").attr("width",20).attr("height",20).attr("x",e).attr("y",o).attr("id",t).style("cursor","pointer").style("opacity",function(){return n?n:.2}).style("pointer-events",function(){return n?"all":"none"}).on("click",ias.graph.map[t])}function o(){var t=ias.util.getBackgroundColorSteps(),e=t.length;u.selectAll("rect").data(t).enter().append("rect").attr("class","legend").attr("x",function(t,e){return 20*e+10}).attr("y",30).attr("width",20).attr("height",20).style("stroke","#000").style("stroke-width",".3px").style("fill",function(t){return ias.util.getBackgroundColor(t)}).style("opacity",ias.config.map.background.opacity).attr("dx",-3).attr("dy",".35em"),u.append("rect").attr("class","legend").attr("x",20*e+15).attr("y",30).attr("width",20).attr("height",20).style("stroke","#000").style("stroke-width",".3px").style("fill","gray").attr("dx",-3).attr("dy",".35em"),t.push("n/a"),u.selectAll("text").data(t).enter().append("text").attr("x",function(t,e){return 20*e+("n/a"!==t?10:15)}).attr("y",28).attr("class","legend").text(function(t){return"n/a"!==t?">"+parseFloat(t).toFixed(1):t}),u.append("text").attr("x",10).attr("y",0).attr("class","title legend").text("HIV Prevalence Rate (%)")}function n(){var t=ias.config.legend.cohorts,e=d3.scale.linear().domain([0,3e5]).range([2,15]);h.selectAll("circle").data(t).enter().append("circle").attr("cx",20).attr("cy",function(t){return 50-e(t)}).style("fill","none","opacity",1).style("stroke",ias.config.map.cohort.linkcolor).style("stroke-width","1px").attr("r",function(t){return e(t)}),h.selectAll("text").data(t).enter().append("text").attr("y",function(t){return 50-2*e(t)+4}).attr("x",40).attr("class","legend").text(function(t,e){return 4===e?">"+t:t}),u.append("text").attr("x",200).attr("y",0).attr("class","title legend").text("Cohort Size")}function r(){e("zoomin",50,20,1),e("zoomout",25,20),e("moveup",-20,10),e("movedown",-20,30),e("moveleft",-35,20),e("moveright",-5,20),o(),n(),t.append("g").append("text").attr("x",ias.config.legend.width).attr("y",ias.config.legend.height).style("text-anchor","end").style("font-size","0.7em").style("fill","gray").text("status: "+ias.version+" - "+ias.mode)}function i(){}function s(t){p.selectAll("#moveup, #movedown, #moveright, #moveleft, #zoomout").transition().duration(1e3).style("opacity",1===t?"0.2":"1").style("pointer-events",1===t?"none":"all"),p.select("#zoomin").transition().duration(1e3).style("opacity",1===t?"1":"0.2").style("pointer-events",1===t?"all":"none")}function a(){}var c=0,l=20,u=t.append("g").attr("id","blegend").attr("transform","translate("+c+","+l+")"),h=t.append("g").attr("id","clegend").attr("transform","translate("+(c+200)+","+l+")"),p=t.append("g").attr("id","buttons").style("pointer-events","none").attr("transform","translate("+(c+700)+","+5+")");return ias.filter.addListener(ias.filter.BACKGROUND_INFO,a),{draw:r,update:i,filterUpdate:a,zoom:s}},t}(ias.graph||{}),ias.load();